{"ast":null,"code":"import _classCallCheck from \"/Users/chenweizhang/WebstormProjects/welive/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chenweizhang/WebstormProjects/welive/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chenweizhang/WebstormProjects/welive/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chenweizhang/WebstormProjects/welive/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chenweizhang/WebstormProjects/welive/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/chenweizhang/WebstormProjects/welive/src/HouseList.js\";\nimport React, { Component } from 'react';\nimport './HouseList.css';\nimport $ from 'jquery';\n\nvar HouseList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HouseList, _Component);\n\n  function HouseList(props) {\n    var _this;\n\n    _classCallCheck(this, HouseList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HouseList).call(this, props));\n\n    _this.handleClickHouse = function () {\n      var handlePayment = _this.handlePayment;\n      var handleConfirm = _this.handleConfirm;\n      $('.house-list .house-div img').click(function () {\n        var houseInfo = '#house-info-' + $(this).attr('id');\n        $('.house-list').css(\"border-top\", \"1px solid #ccc\").css(\"padding-top\", \"24px\");\n        $(houseInfo).show().css(\"display\", \"flex\");\n        $('#jumbotron-wrapper').hide();\n        $('.house-list-wrapper').css(\"margin-top\", \"100px\");\n        $('.moto').hide();\n        $('.search').hide();\n        $('.house-wrapper').hide();\n        handlePayment();\n        handleConfirm();\n      });\n    };\n\n    _this.handleCancelView = function () {\n      var clearPrice = _this.clearPrice;\n      $('.house-info-box button[name = cancel]').click(function () {\n        $('.search').show();\n        $('.house-wrapper').show(); // $('#jumbotron-wrapper').show();\n\n        $('.house-info').hide();\n        $('.house-list').css(\"border-top\", \"none\").css(\"padding-top\", \"0\");\n        $('.house-list-wrapper').css(\"margin-top\", \"0\");\n        clearPrice();\n      });\n    };\n\n    _this.getUserId = function () {\n      return _this.props.userId;\n    };\n\n    _this.handleConfirm = function () {\n      var getUserId = _this.getUserId;\n      $('.house-info-box button[name = confirm]').click(function () {\n        var userId = getUserId();\n        var houseID = $(this).attr('id').split('-').pop();\n        var start = '.house-info-box .start-' + houseID;\n        var startDate = $(start).val();\n        var leave = '.house-info-box .leave-' + houseID;\n        var leaveDate = $(leave).val();\n        var houseInfo = {\n          houseId: houseID,\n          userId: userId,\n          startDate: startDate,\n          leaveDate: leaveDate\n        };\n        $.ajax({\n          url: 'http://10.195.96.58:3000/reservation/newReservation',\n          type: 'POST',\n          dataType: 'json',\n          contentType: 'application/json',\n          data: JSON.stringify(houseInfo)\n        }).done(function () {\n          alert(\"You have successfully reserve this house.\");\n          $('.house-info').hide();\n          $('.search').show(); // $('.house-wrapper').show();\n        }).fail(function () {\n          console.log(\"error\");\n        }).always(function () {\n          console.log(\"complete\");\n        });\n      });\n    };\n\n    _this.handlePayment = function () {\n      var startTime;\n      var start;\n      $('.house-info-box input[name = start-time]').change(function () {\n        startTime = $(this).val();\n        start = startTime.split('-').pop(); // console.log(end)\n      });\n      var leaveTime;\n      var end;\n      var setPrice = _this.setPrice;\n      $('.house-info-box input[name = leave-time]').change(function () {\n        leaveTime = $(this).val();\n        end = leaveTime.split('-').pop();\n        var id = $(this).attr('id').split('-').pop();\n        var name = '.house-info-box .price-' + id;\n        var price = $(name).text().split(':').pop(); // console.log(price)\n\n        var total = (Number(end) - Number(start)) * Number(price); // console.log(total);\n\n        setPrice(total);\n      });\n    };\n\n    _this.setPrice = function (price) {\n      _this.setState({\n        price: price\n      });\n    };\n\n    _this.clearPrice = function () {\n      _this.setState({\n        price: null\n      });\n    };\n\n    _this.state = {\n      price: null,\n      userId: null\n    };\n    return _this;\n  }\n\n  _createClass(HouseList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleClickHouse();\n      this.handleCancelView();\n      this.handlePayment();\n      this.handleConfirm();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      this.state.userId = this.props.userId;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"house-list-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"house-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.props.imageList.map(function (image, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          className: \"house-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"house-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          onMouseOver: _this2.handleClickHouse,\n          id: index,\n          src: require('' + image.imgDir),\n          alt: 'house-' + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"house-info-mini\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, \"City:\\xA0\", image.city), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, \"Price/Night:\\xA0\", image.price), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, \"Score:\\xA0\", image.avgScore))), React.createElement(\"div\", {\n          id: 'house-info-' + index,\n          className: \"house-info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"house-\" + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: require('' + image.imgDir),\n          alt: 'house-' + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"house-info-box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"city\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \"City:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, image.city)), React.createElement(\"p\", {\n          className: \"address\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, \"Address:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, image.address)), React.createElement(\"p\", {\n          className: \"house-tag\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, \"House Tag:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, image.tag)), React.createElement(\"p\", {\n          className: \"price-\" + index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, \"Price/Night:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, image.price)), React.createElement(\"p\", {\n          className: \"avg-score\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, \"Average Score:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, image.avgScore)), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, \"Start Date:\", React.createElement(\"input\", {\n          className: 'start-' + image.house_id,\n          id: \"start-\" + index,\n          type: \"date\",\n          name: \"start-time\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, \"Leave Date:\", React.createElement(\"input\", {\n          className: 'leave-' + image.house_id,\n          id: \"leave-\" + index,\n          type: \"date\",\n          name: \"leave-time\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        })), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, \"Total:\", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, _this2.state.price)), React.createElement(\"button\", {\n          id: \"confirm-\" + image.house_id,\n          name: \"confirm\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, \"Confirm\"), React.createElement(\"button\", {\n          onMouseOver: _this2.handleCancelView,\n          id: \"cancel-\" + image.house_id,\n          name: \"cancel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, \"Cancel\"))));\n      })));\n    }\n  }]);\n\n  return HouseList;\n}(Component);\n\nexport default HouseList;","map":{"version":3,"sources":["/Users/chenweizhang/WebstormProjects/welive/src/HouseList.js"],"names":["React","Component","$","HouseList","props","handleClickHouse","handlePayment","handleConfirm","click","houseInfo","attr","css","show","hide","handleCancelView","clearPrice","getUserId","userId","houseID","split","pop","start","startDate","val","leave","leaveDate","houseId","ajax","url","type","dataType","contentType","data","JSON","stringify","done","alert","fail","console","log","always","startTime","change","leaveTime","end","setPrice","id","name","price","text","total","Number","setState","state","prevProps","prevState","snapshot","imageList","map","image","index","require","imgDir","city","avgScore","address","tag","house_id"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './HouseList.css'\nimport $ from 'jquery'\n\nclass HouseList extends Component{\n\n    constructor(props){\n       super(props);\n\n       this.state = {\n           price: null,\n           userId: null\n       }\n    }\n\n    componentDidMount() {\n\n        this.handleClickHouse();\n\n        this.handleCancelView();\n\n        this.handlePayment();\n\n        this.handleConfirm();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        this.state.userId = this.props.userId;\n    }\n\n    handleClickHouse = () => {\n\n        let handlePayment = this.handlePayment;\n        let handleConfirm = this.handleConfirm;\n\n        $('.house-list .house-div img').click(function () {\n\n            let houseInfo = '#house-info-' + $(this).attr('id');\n\n            $('.house-list').css(\"border-top\", \"1px solid #ccc\").css(\"padding-top\", \"24px\");\n            $(houseInfo).show().css(\"display\", \"flex\")\n            $('#jumbotron-wrapper').hide();\n            $('.house-list-wrapper').css(\"margin-top\", \"100px\");\n            $('.moto').hide();\n            $('.search').hide();\n            $('.house-wrapper').hide();\n\n            handlePayment();\n            handleConfirm();\n\n        })\n    }\n\n    handleCancelView = () => {\n\n        let clearPrice = this.clearPrice;\n\n\n        $('.house-info-box button[name = cancel]').click(function () {\n\n            $('.search').show();\n            $('.house-wrapper').show();\n\n            // $('#jumbotron-wrapper').show();\n            $('.house-info').hide();\n            $('.house-list').css(\"border-top\", \"none\").css(\"padding-top\", \"0\");\n            $('.house-list-wrapper').css(\"margin-top\", \"0\");\n\n            clearPrice();\n        });\n\n\n    }\n\n    getUserId = () => this.props.userId\n\n    handleConfirm = () => {\n\n        let getUserId = this.getUserId;\n\n        $('.house-info-box button[name = confirm]').click(\n            function () {\n\n                let userId = getUserId();\n\n                let houseID = $(this).attr('id').split('-').pop();\n\n                let start = '.house-info-box .start-' + houseID;\n                let startDate = $(start).val();\n\n\n                let leave = '.house-info-box .leave-' + houseID;\n                let leaveDate = $(leave).val();\n\n                let houseInfo = {\n                    houseId: houseID,\n                    userId: userId,\n                    startDate: startDate,\n                    leaveDate: leaveDate\n                }\n\n                $.ajax({\n                    url: 'http://10.195.96.58:3000/reservation/newReservation',\n                    type: 'POST',\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    data: JSON.stringify(houseInfo),\n                    })\n                    .done(function () {\n                        alert(\"You have successfully reserve this house.\")\n                        $('.house-info').hide();\n\n                        $('.search').show();\n                        // $('.house-wrapper').show();\n                    })\n                    .fail(function() {\n                        console.log(\"error\");\n\n                    })\n                    .always(function() {\n                        console.log(\"complete\");\n                    })\n            }\n        )\n    }\n\n    handlePayment = () => {\n\n        let startTime;\n        let start;\n\n        $('.house-info-box input[name = start-time]').change(function () {\n            startTime  = $(this).val();\n            start = startTime.split('-').pop();\n            // console.log(end)\n        })\n\n\n        let leaveTime;\n        let end;\n\n        let setPrice = this.setPrice;\n\n        $('.house-info-box input[name = leave-time]').change(function () {\n\n            leaveTime = $(this).val();\n\n            end = leaveTime.split('-').pop();\n\n            let id = $(this).attr('id').split('-').pop();\n\n            let name = '.house-info-box .price-' + id;\n\n            let price = $(name).text().split(':').pop();\n\n            // console.log(price)\n\n            let total = (Number(end) - Number(start)) * Number(price);\n\n            // console.log(total);\n\n            setPrice(total);\n        })\n\n\n\n    }\n\n    setPrice = (price) => {\n\n        this.setState({price: price});\n    }\n\n    clearPrice = () => {\n\n        this.setState({price: null});\n    }\n\n    render() {\n        return (\n            <div className=\"house-list-wrapper\">\n                <div className=\"house-list\">\n                    {this.props.imageList.map((image, index) =>\n                        <div key={index} className=\"house-div\">\n                            <div className=\"house-wrapper\">\n                                    <img onMouseOver={this.handleClickHouse} id={index} src={require('' + image.imgDir)} alt={'house-' + index}/>\n                                    <div className=\"house-info-mini\">\n                                        <span>City:&nbsp;{image.city}</span>\n                                        <span>Price/Night:&nbsp;{image.price}</span>\n                                        <span>Score:&nbsp;{image.avgScore}</span>\n                                    </div>\n                            </div>\n                            <div id={'house-info-' + index} className=\"house-info\">\n                                <div id={\"house-\" + index}><img src={require('' + image.imgDir)} alt={'house-' + index}/></div>\n                                <div className=\"house-info-box\">\n                                    <br/>\n                                    <p className=\"city\">City:<span>{image.city}</span></p>\n                                    <p className=\"address\">Address:<span>{image.address}</span></p>\n                                    <p className=\"house-tag\">House Tag:<span>{image.tag}</span></p>\n                                    <p className={\"price-\" + index}>Price/Night:<span>{image.price}</span></p>\n                                    <p className=\"avg-score\">Average Score:<span>{image.avgScore}</span></p>\n                                    <br/>\n                                    <hr/>\n                                    <br/>\n                                    <p>Start Date:<input className={'start-' + image.house_id} id={\"start-\" + index} type=\"date\" name=\"start-time\"/></p>\n                                    <p>Leave Date:<input className={'leave-' + image.house_id} id={\"leave-\" + index} type=\"date\" name=\"leave-time\"/></p>\n                                    <p>Total:<span>{this.state.price}</span></p>\n                                    <button id={\"confirm-\" + image.house_id} name=\"confirm\">Confirm</button>\n                                    <button onMouseOver={this.handleCancelView} id={\"cancel-\" + image.house_id} name=\"cancel\">Cancel</button>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default HouseList;"]},"metadata":{},"sourceType":"module"}